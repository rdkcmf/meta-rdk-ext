From 3c2114b856892f982d90cb3b4fa1c07fbd2ddbcf Mon Sep 17 00:00:00 2001
From: Ievgen Mutavchi <Ievgen_Mutavchi@comcast.com>
Date: Sun, 26 Apr 2020 11:59:47 -0400
Subject: [PATCH 79/93] Add isEmpty() API to PODRedBlackTree
Source: COMCAST
License: GPLV2
Upstream-Status: None
Signed-off-by: Eugene Mutavchi <Ievgen_Mutavchi@comcast.com>

Make HTMLMediaElement::ignoreTrackDisplayUpdateRequests() constant time
---
 Source/WebCore/html/HTMLMediaElement.h    | 2 +-
 Source/WebCore/platform/PODRedBlackTree.h | 5 +++++
 2 files changed, 6 insertions(+), 1 deletion(-)

Index: git/Source/WebCore/html/HTMLMediaElement.h
===================================================================
--- git.orig/Source/WebCore/html/HTMLMediaElement.h
+++ git/Source/WebCore/html/HTMLMediaElement.h
@@ -589,7 +589,7 @@ protected:
     bool isMediaElement() const final { return true; }
 
 #if ENABLE(VIDEO_TRACK)
-    bool ignoreTrackDisplayUpdateRequests() const { return m_ignoreTrackDisplayUpdate > 0 || !m_textTracks || !m_cueTree.size(); }
+    bool ignoreTrackDisplayUpdateRequests() const { return m_ignoreTrackDisplayUpdate > 0 || !m_textTracks || m_cueTree.isEmpty(); }
     void beginIgnoringTrackDisplayUpdateRequests();
     void endIgnoringTrackDisplayUpdateRequests();
 #endif
Index: git/Source/WebCore/platform/PODRedBlackTree.h
===================================================================
--- git.orig/Source/WebCore/platform/PODRedBlackTree.h
+++ git/Source/WebCore/platform/PODRedBlackTree.h
@@ -154,6 +154,11 @@ public:
         return counter.count();
     }
 
+    bool isEmpty() const
+    {
+        return m_root == nullptr;
+    }
+
     // See the class documentation for an explanation of this property.
     void setNeedsFullOrderingComparisons(bool needsFullOrderingComparisons)
     {
