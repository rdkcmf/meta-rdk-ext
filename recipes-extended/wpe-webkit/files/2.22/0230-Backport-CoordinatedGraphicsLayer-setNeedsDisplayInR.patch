From db8971f55a7bce122171ad0600f518b3ef1b5bce Mon Sep 17 00:00:00 2001
From: Eugene Mutavchi <Ievgen_Mutavchi@comcast.com>
Date: Sat, 6 Feb 2021 02:25:20 +0000
Subject: [PATCH 1/4] Backport
 CoordinatedGraphicsLayer::setNeedsDisplayInRect() converts FloatRect to
 IntRect erroneously

see https://bugs.webkit.org/show_bug.cgi?id=179476
---
 .../graphics/texmap/coordinated/CoordinatedGraphicsLayer.cpp    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Source/WebCore/platform/graphics/texmap/coordinated/CoordinatedGraphicsLayer.cpp b/Source/WebCore/platform/graphics/texmap/coordinated/CoordinatedGraphicsLayer.cpp
index c48db0f97abe..0d3faee6d1c5 100644
--- a/Source/WebCore/platform/graphics/texmap/coordinated/CoordinatedGraphicsLayer.cpp
+++ b/Source/WebCore/platform/graphics/texmap/coordinated/CoordinatedGraphicsLayer.cpp
@@ -1078,7 +1078,7 @@ void CoordinatedGraphicsLayer::updateContentBuffers()
 
     if (!m_needsDisplay.completeLayer) {
         for (auto& rect : m_needsDisplay.rects)
-            m_mainBackingStore->invalidate(IntRect { rect });
+            m_mainBackingStore->invalidate(enclosingIntRect ( rect ));
     } else
         m_mainBackingStore->invalidate({ { }, IntSize { m_size } });
 
-- 
2.17.1

